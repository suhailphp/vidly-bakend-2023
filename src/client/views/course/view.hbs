<style>
    .timeline-label .timeline-label {
        width: 150px;
    }
    .timeline-label:before{
        left: 151px;
        right: 151px;
    }

    .enrolledTable thead{
        display:none;
    }

</style>
<div class="modal-content">
    <div class="modal-header">
        <div class="d-flex align-items-center">
            <div class="d-flex align-items-center flex-grow-1">
                <div class="symbol symbol-45px me-5">
                    <img src="{{{bgImage}}}" alt="">
                </div>
                <div class="d-flex flex-column">
                    <a class="text-gray-900 text-hover-primary fs-6 fw-bold">{{? LNG '==' 'ar' data.nameAr data.nameEn}}</a>
                {{#compare data.courseType '===' 'internal'}}
                    <div class="badge badge-lg badge-light-success d-inline">{{__ 'Internal Course'}}</div>
                {{else}}
                    <div class="badge badge-lg badge-light-warning d-inline">{{__ 'External Course'}}</div>
                {{/compare}}
                </div>
            </div>
        </div>

        <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal" aria-label="Close">
           <span class="svg-icon svg-icon-1">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="currentColor" />
                    <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="currentColor" />
                </svg>
            </span>
        </div>
    </div>

    <div class="modal-body ">

        <div class="d-flex flex-stack fs-4 py-3">
            <div class="fw-bold rotate collapsible" data-bs-toggle="collapse" href="#kt_user_view_details" role="button" aria-expanded="false" aria-controls="kt_user_view_details">{{__ 'Details'}}
            <span class="ms-2 rotate-180">
                <span class="svg-icon svg-icon-3">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11.4343 12.7344L7.25 8.55005C6.83579 8.13583 6.16421 8.13584 5.75 8.55005C5.33579 8.96426 5.33579 9.63583 5.75 10.05L11.2929 15.5929C11.6834 15.9835 12.3166 15.9835 12.7071 15.5929L18.25 10.05C18.6642 9.63584 18.6642 8.96426 18.25 8.55005C17.8358 8.13584 17.1642 8.13584 16.75 8.55005L12.5657 12.7344C12.2533 13.0468 11.7467 13.0468 11.4343 12.7344Z" fill="currentColor"></path>
                    </svg>
                </span>
            </span></div>
            <div class="d-flex justify-content-center">
                {{{weekdaysList data.weekdays LNG}}}
            </div>
            <span data-bs-toggle="tooltip" data-bs-trigger="hover" data-bs-original-title="Edit customer details" data-kt-initialized="1">
                <a href="course/{{data.courseID}}/edit" class="btn btn-sm btn-light-primary" >{{__ 'Edit'}}</a>
            </span>
        </div>

        <div class="separator"></div>

        <div id="kt_user_view_details" class="collapse show mt-1 row">

            <div class="row p-0 mb-5 px-9">

                <div class="col">
                    <div class="border border-dashed border-gray-300 text-center min-w-125px rounded pt-4 pb-2 my-3">
                        <span class="fs-5 fw-semibold text-info d-block">{{__ 'Amount'}}</span>
                        <span class="fs-4 fw-bold text-gray-900 counted" data-kt-countup="true" data-kt-countup-value="0" data-kt-initialized="1">{{data.amount}}</span>
                    </div>
                </div>

                <div class="col">
                    <div class="border border-dashed border-gray-300 text-center min-w-125px rounded pt-4 pb-2 my-3">
                        <span class="fs-5 fw-semibold text-primary d-block">{{__ 'Quota'}}</span>
                        <span class="fs-4 fw-bold text-gray-900 counted" data-kt-countup="true" data-kt-countup-value="72" data-kt-initialized="1">{{data.quota}}</span>
                    </div>
                </div>

                <div class="col">
                    <div class="border border-dashed border-gray-300 text-center min-w-125px rounded pt-4 pb-2 my-3">
                        <span class="fs-5 fw-semibold text-success d-block">{{__ 'Start Date'}}</span>
                        <span class="fs-4 fw-bold text-gray-900 counted" data-kt-countup="true" data-kt-countup-value="291" data-kt-initialized="1">{{simpleDate data.startDate}}</span>
                    </div>
                </div>

                <div class="col">
                    <div class="border border-dashed border-gray-300 text-center min-w-125px rounded pt-4 pb-2 my-3">
                        <span class="fs-5 fw-semibold text-danger d-block">{{__ 'End Date'}}</span>
                        <span class="fs-4 fw-bold text-gray-900 counted" data-kt-countup="true" data-kt-countup-value="291" data-kt-initialized="1">{{simpleDate data.endDate}}</span>
                    </div>
                </div>

            </div>
            <div class="row">
                <div class="col-md-6 row mb-7">
                    <label class="col-lg-4 fw-semibold text-muted">{{__ 'Location'}}</label>
                    <div class="col-lg-8">
                        <span class="fw-bold fs-6 text-gray-800">{{data.location}}</span>
                    </div>
                </div>

                <div class="col-md-6 row mb-7">
                    <label class="col-lg-4 fw-semibold text-muted">{{__ 'Timing'}}</label>
                    <div class="col-lg-8">
                        <div class="text-gray-800 fw-semibold fs-4">{{simleTime12 data.startDate}}<span class="text-gray-400 fw-semibold fs-7">{{simleTimeAM data.startDate}}</span> - {{simleTime12 data.endDate}}<span class="text-gray-400 fw-semibold fs-7">{{simleTimeAM data.endDate}}</span></div>
                        
                    </div>
                </div>
            </div>


            {{#compare data.courseType '===' 'internal'}}
                <div class="row">
                    <div class="col-md-6 row mb-7">
                        <label class="col-lg-4 fw-semibold text-muted">{{__ 'Category'}}</label>
                        <div class="col-lg-8">
                            <span class="fw-bold fs-6 text-gray-800">{{? LNG '==' 'ar' data.courseCategory.nameAr data.courseCategory.nameEn}}</span>
                        </div>
                    </div>
                </div>
            {{else}}
                <div class="row">
                    <div class="col-md-6 row mb-7">
                        <label class="col-lg-4 fw-semibold text-muted">{{__ 'Department'}}</label>
                        <div class="col-lg-8">
                            <span class="fw-bold fs-6 text-gray-800">{{? LNG '==' 'ar' data.courseDepartment.nameAr data.courseDepartment.nameEn}}</span>
                        </div>
                    </div>
                </div>
            {{/compare}}

             <div class="row">
                    <div class="col-md-12 row mb-7">
                        <label class="col-lg-2 fw-semibold text-muted">{{__ 'Description'}}</label>
                        <div class="col-lg-10">
                            <div class="d-flex ">
                                {{{data.description}}}
                            </div>
                        </div>
                    </div>
                </div>



            <div class="row">
                <div class="col-md-12">

                    <div id="kt_modal_users_search_handler" data-kt-search-keypress="true" data-kt-search-min-length="2" data-kt-search-enter="enter" data-kt-search-layout="inline">
                        <!--begin::Form-->
                        <form data-kt-search-element="form" class="w-100 position-relative mb-5" autocomplete="off" id="EmployeeEnrollForm">
                            <input type="hidden" />
                            <span class="svg-icon svg-icon-2 svg-icon-lg-1 svg-icon-gray-500 position-absolute top-50 ms-5 translate-middle-y">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect opacity="0.5" x="17.0365" y="15.1223" width="8.15546" height="2" rx="1" transform="rotate(45 17.0365 15.1223)" fill="currentColor" />
                                    <path d="M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z" fill="currentColor" />
                                </svg>
                            </span>

                            <input type="text" class="form-control form-control-lg form-control-solid px-15" name="search" value="" placeholder="{{__ 'Search by username, full name or email...'}}" data-kt-user-table-filter="enrolledSearch" id="searchText"  />
                            <span class="position-absolute top-50 end-0 translate-middle-y lh-0 d-none me-5" data-kt-search-element="spinner">
                                <span class="spinner-border h-15px w-15px align-middle text-muted"></span>
                            </span>

                            <span class="btn btn-flush btn-active-color-primary position-absolute top-50 end-0 translate-middle-y lh-0 me-5 d-none" data-kt-search-element="clear">
                                <span class="svg-icon svg-icon-2 svg-icon-lg-1 me-0">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="currentColor" />
                                        <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="currentColor" />
                                    </svg>
                                </span>
                            </span>
                        </form>
                    </div>
            
                     <table class="table align-middle table-row-dashed enrolledTable" id="kt_table_users_enrolled">
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-footer flex-start" style="padding: 0.5rem 1.7rem !important;">
        <div class="row "  style="width: 100%;">
            {{#if data.createdBy}}
                <div class="col "  style="width: 100%;">
                    <div class="fw-bold">
                        <span class="badge badge-light-success d-flex align-items-center fs-8 fw-semibold">
                                <span class="svg-icon svg-icon-8 svg-icon-success me-1">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M8.424 12.282l4.402 4.399-5.826 1.319 1.424-5.718zm15.576-6.748l-9.689 9.804-4.536-4.536 9.689-9.802 4.536 4.534zm-6 8.916v6.55h-16v-12h6.743l1.978-2h-10.721v16h20v-10.573l-2 2.023z" fill="currentColor"></path>
                                    </svg>
                                </span>{{__ 'Created By'}}</span>
                    </div>
                    <div class="d-flex">

                        <div class="symbol symbol-circle symbol-45px">
                            <img src="{{#if data.createdBy.profilePhotoDocumentID}}{{CONFIG.BASE_URL}}employee/document/{{data.createdBy.employeeID}}{{else}}{{CONFIG.BASE_URL}}dist/assets/media/avatars/blank.png{{/if}}" alt="">
                        </div>
                        <div class="ms-5">
                            <div class="d-flex align-items-center">
                                <a  class="text-dark fw-bold text-hover-primary fs-5 me-4">{{? LNG '==' 'ar' data.createdBy.fullNameAr data.createdBy.fullNameEn}}</a>
                            </div>
                            <span class="text-muted fw-semibold mb-3">{{#if data.createdOn}}{{dateToStringSimple data.createdOn}}{{/if}}</span>
                        </div>
                    </div>
                </div>
            
            {{/if}}
             {{#if data.updatedBy}}
                <div class="col"  style="width: 100%;">
                    <div class="fw-bold">
                        <span class="badge badge-light-warning d-flex align-items-center fs-8 fw-semibold" style="width: 100%;">
                            <span class="svg-icon svg-icon-8 svg-icon-warning me-1">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="m21.897 13.404.008-.057v.002c.024-.178.044-.357.058-.537.024-.302-.189-.811-.749-.811-.391 0-.715.3-.747.69-.018.221-.044.44-.078.656-.645 4.051-4.158 7.153-8.391 7.153-3.037 0-5.704-1.597-7.206-3.995l1.991-.005c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-4.033c-.414 0-.75.336-.75.75v4.049c0 .414.336.75.75.75s.75-.335.75-.75l.003-2.525c1.765 2.836 4.911 4.726 8.495 4.726 5.042 0 9.217-3.741 9.899-8.596zm-19.774-2.974-.009.056v-.002c-.035.233-.063.469-.082.708-.024.302.189.811.749.811.391 0 .715-.3.747-.69.022-.28.058-.556.107-.827.716-3.968 4.189-6.982 8.362-6.982 3.037 0 5.704 1.597 7.206 3.995l-1.991.005c-.414 0-.75.336-.75.75s.336.75.75.75h4.033c.414 0 .75-.336.75-.75v-4.049c0-.414-.336-.75-.75-.75s-.75.335-.75.75l-.003 2.525c-1.765-2.836-4.911-4.726-8.495-4.726-4.984 0-9.12 3.654-9.874 8.426z" fill="currentColor"></path>
                                </svg>
                            </span>{{__ 'Updated By'}}
                        </span>
                    </div>
                    <div class="d-flex">

                        <div class="symbol symbol-circle symbol-45px">
                            <img src="{{#if data.updatedBy.profilePhotoDocumentID}}{{CONFIG.BASE_URL}}employee/document/{{data.updatedBy.employeeID}}{{else}}{{CONFIG.BASE_URL}}dist/assets/media/avatars/blank.png{{/if}}" alt="">
                        </div>
                        <div class="ms-5">
                            <div class="d-flex align-items-center">
                                <a  class="text-dark fw-bold text-hover-primary fs-5 me-4">{{? LNG '==' 'ar' data.updatedBy.fullNameAr data.updatedBy.fullNameEn}}</a>
                            </div>
                            <span class="text-muted fw-semibold mb-3">{{#if data.updatedOn}}{{dateToStringSimple data.updatedOn}}{{/if}}</span>
                        </div>
                    </div>
                </div>
            {{/if}}

            {{#if data.deletedBy}}
                <div class="col" style="width: 100%;">
                    <div class="fw-bold">
                        <span class="badge badge-light-danger d-flex align-items-center fs-8 fw-semibold">
                            <span class="svg-icon svg-icon-8 svg-icon-danger me-1">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="m20.015 6.506h-16v14.423c0 .591.448 1.071 1 1.071h14c.552 0 1-.48 1-1.071 0-3.905 0-14.423 0-14.423zm-5.75 2.494c.414 0 .75.336.75.75v8.5c0 .414-.336.75-.75.75s-.75-.336-.75-.75v-8.5c0-.414.336-.75.75-.75zm-4.5 0c.414 0 .75.336.75.75v8.5c0 .414-.336.75-.75.75s-.75-.336-.75-.75v-8.5c0-.414.336-.75.75-.75zm-.75-5v-1c0-.535.474-1 1-1h4c.526 0 1 .465 1 1v1h5.254c.412 0 .746.335.746.747s-.334.747-.746.747h-16.507c-.413 0-.747-.335-.747-.747s.334-.747.747-.747zm4.5 0v-.5h-3v.5z" fill="currentColor"></path>
                                </svg>
                            </span>{{__ 'Deleted By'}}
                        </span>
                    </div>
                    <div class="d-flex">

                        <div class="symbol symbol-circle symbol-45px">
                            <img src="{{#if data.deletedBy.profilePhotoDocumentID}}{{CONFIG.BASE_URL}}employee/document/{{data.deletedBy.employeeID}}{{else}}{{CONFIG.BASE_URL}}dist/assets/media/avatars/blank.png{{/if}}" alt="">
                        </div>
                        <div class="ms-5">
                            <div class="d-flex align-items-center">
                                <a  class="text-dark fw-bold text-hover-primary fs-5 me-4">{{? LNG '==' 'ar' data.deletedBy.fullNameAr data.deletedBy.fullNameEn}}</a>
                            </div>
                            <span class="text-muted fw-semibold mb-3">{{#if data.deletedOn}}{{dateToStringSimple data.deletedOn}}{{/if}}</span>
                        </div>
                    </div>
                </div>
            {{/if}}
        </div>
    </div>

  
</div>


<script type="text/javascript">

    courseID = '{{data.courseID}}'
    enrolledEmployeeTable = $("#kt_table_users_enrolled").DataTable({
        ...PSA.defaults.datatable({url:'{{CONFIG.BASE_URL}}course/'+courseID+'/getEnrolledEmployees'}), 
        //order: [[1, 'desc']],
        //'orderable': false,
        lengthChange: false, // Hide the page size selector
        pageLength: 5, // Set the default page size to 10
        // Other DataTa
        'columns' : [

            { 	
                name:getLang() == 'ar' ? 'fullNameAr' : 'fullNameEn',
                orderable: false,
                data : function ( row) {
                    return `
                        <div class="d-flex align-items-center">
                            <div class="symbol symbol-circle symbol-50px overflow-hidden me-3">
                                <a  style="cursor:pointer" >
                                    <div class="symbol-label">
                                        ${(row.employee.profilePhotoDocumentID)?
                                            `<img src="{{CONFIG.BASE_URL}}employee/document/${row.employee.employeeID}" class="w-100" style="cursor:pointer"/>`
                                        :
                                            PSA.nameToIcon(row.employee.fullNameAr,row.employee.fullNameEn,getLang())
                                        }
                                    </div>
                                </a>
                            </div>
                            <div class="d-flex flex-column">
                                <a ,'${getLang() == 'ar' ? row.employee.fullNameAr : row.employee.fullNameEn}')" class="text-gray-800 text-hover-primary mb-1" style="cursor:pointer">${getLang() == 'ar' ? row.employee.fullNameAr : row.employee.fullNameEn}</a>
                                <span  style="cursor:pointer">${row.employee.militaryNumber}</span>
                            </div>
                        </div>
                    `
                }
            },
            {
                name:'mobile',
                orderable: false,
                data : row =>  `<div class="badge badge-light fw-bold" style="cursor:pointer" >${row.employee.mobile}</div>`
            },

            {
                name:'email',
                orderable: false,
                data : row =>  `<div class="badge badge-light fw-bold" style="cursor:pointer" >${row.employee.email}</div>`
            },
        ]
    });
        

  	filterSearchErnrolledEmployeeTable = document.querySelector('[data-kt-user-table-filter="enrolledSearch"]');
	filterSearchErnrolledEmployeeTable.addEventListener('keyup', function (e) {
        //loadDataTable();
		enrolledEmployeeTable.search(e.target.value).draw();
	});

</script>